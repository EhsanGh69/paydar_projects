{% load static %}
{% load base_tags %}



<aside class="main-sidebar sidebar-dark-cyan elevation-4">

    

    <!-- Sidebar -->
    <div class="sidebar h-100">
        

         <!-- Brand Logo -->
        <a href="/" class="nav-link" style="border-bottom: 1px solid #4f5962;">
            <img src="{% static 'panel/dist/img/logo.700.png' %}" alt="AdminLTE Logo" style="opacity: .8" width="70">
            <span class="brand-text mr-2">املاک پایدار</span>
        </a>
    
       
        <!-- Sidebar user panel (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex justify-content-around">
            <div class="image">
                <img src="{% static 'panel/dist/img/co.png' %}" class="img-circle elevation-2" alt="User Image">
            </div>
            <div class="info">
                <a href="#" class="d-block">{{ user.get_full_name }}</a>
            </div>
        </div>

        <!-- Sidebar Menu -->
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

                {% if perms.government_accounts %}
                    <li class="nav-item has-treeview
                        {% if request.resolver_match.app_name == 'government_accounts' %}menu-open{% endif %}">
                        <a href="#" class="nav-link 
                        {% if request.resolver_match.app_name == 'government_accounts' %}active{% endif %}">
                            <p class="mr-2" style="font-size: 1.2rem;">
                                طرف حساب دولتی
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview">

                            {% if perms.government_accounts.view_organization %}
                                {% main_menu request 'government_accounts' 'organizations' 'organization_create' 'organization_update' '' 'fa-building-columns' 'ارگان‌ها' %}
                            {% endif %}

                            {% if perms.government_accounts.view_receive %}
                                {% main_menu request 'government_accounts' 'receives' 'receive_create' 'receive_update' 'receives_search' 'fa-file-invoice-dollar' 'دریافت‌ها' %}
                            {% endif %}

                            {% if perms.government_accounts.view_payment %}
                                {% main_menu request 'government_accounts' 'payments' 'payment_create' 'payment_update' 'payments_search' 'fa-money-check-dollar' 'پرداخت‌ها' %}
                            {% endif %}

                            {% if perms.government_accounts.view_activity %}
                                {% main_menu request 'government_accounts' 'activities' 'activity_create' 'activity_update' 'activities_search' 'fa-people-carry-box' 'فعالیت‌ها' %}
                            {% endif %}

                        </ul>

                    </li>
                {% endif %}

                {% if perms.non_government_accounts %}
                    <li class="nav-item has-treeview border-top border-light 
                        {% if request.resolver_match.app_name == 'non_government_accounts' %}menu-open{% endif %}">
                        <a href="#" class="nav-link
                        {% if request.resolver_match.app_name == 'non_government_accounts' %}active{% endif %}">
                            <p class="mr-2" style="font-size: 1.2rem;">
                                طرف حساب غیردولتی
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>

                        <ul class="nav nav-treeview">

                            {% if perms.non_government_accounts.view_contractors %}
                                {% main_menu request 'non_government_accounts' 'contractors' 'contractor_create' 'contractor_update' 'contractors_search' 'fa-person-digging' 'پیمانکاران' %}
                            {% endif %}

                            {% if perms.non_government_accounts.view_suppliers %}
                                {% main_menu request 'non_government_accounts' 'suppliers' 'supplier_create' 'supplier_update' 'suppliers_search' 'fa-people-line' 'تأمین کنندگان' %}
                            {% endif %}

                            {% if perms.non_government_accounts.view_personnel %}
                                {% main_menu request 'non_government_accounts' 'personnel' 'personnel_create' 'personnel_update' 'personnel_search' 'fa-people-roof' 'پرسنل' %}
                            {% endif %}

                            {% if perms.non_government_accounts.view_partners %}
                                {% main_menu request 'non_government_accounts' 'partners' 'partner_create' 'partner_update' 'partners_search' 'fa-user-group' 'شرکاء' %}
                            {% endif %}

                            {% if perms.non_government_accounts.view_buyerssellers %}
                                {% main_menu request 'non_government_accounts' 'buyers_sellers' 'buyer_seller_create' 'buyer_seller_update' 'buyers_sellers_search' 'fa-store' 'خریداران و فروشندگان' %}
                            {% endif %}

                            {% if perms.non_government_accounts.view_orders %}
                                {% main_menu request 'non_government_accounts' 'orders' 'order_create' 'order_update' 'orders_search' 'fa-truck' 'سفارشات' %}
                            {% endif %}

                            {% if perms.non_government_accounts.view_conflictorders %}
                                {% main_menu request 'non_government_accounts' 'conflict_orders' 'conflict_order_create' 'conflict_order_update' 'conflict_orders_search' 'fa-truck-ramp-box' 'مغایرت سفارشات' %}
                            {% endif %}
                            
                        </ul>

                    </li>
                {% endif %}

                {% if perms.projects %}
                    <li class="nav-item has-treeview border-top border-light accordion
                        {% if request.resolver_match.app_name == 'projects' %}menu-open{% endif %}">
                        <a href="#" class="nav-link
                        {% if request.resolver_match.app_name == 'projects' %}active{% endif %}">
                            <p class="mr-2" style="font-size: 1.2rem;">
                                پروژه‌ها
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>

                        <ul class="nav nav-treeview">

                            {% if perms.projects.view_projects %}
                                {% main_menu request 'projects' 'projects' 'project_create' 'project_update' 'projects_search' 'fa-trowel-bricks' 'پروژه‌ها' %}
                            {% endif %}

                            {% if perms.projects.view_owners %}
                                {% main_menu request 'projects' 'owners' 'owner_create' 'owner_update' 'owners_search' 'fa-person-shelter' 'مالکین' %}
                            {% endif %}

                            {% if perms.projects.view_workreference %}
                                {% main_menu request 'projects' 'work_references' 'work_reference_create' 'work_reference_update' 'work_references_search' 'fa-person-arrow-up-from-line' 'ارجاع کارها' %}
                            {% endif %}

                            {% if perms.projects.view_costs %}
                                {% main_menu request 'projects' 'costs' 'cost_create' 'cost_update' 'costs_search' 'fa-cash-register' 'هزینه‌ها' %}
                            {% endif %}

                            {% if perms.projects.view_paymentsimages %}
                                {% main_menu request 'projects' 'payments_images' 'payments_image_create' 'payments_image_update' 'payments_images_search' 'fa-file-image' 'تصاویر فیش‌های پرداختی' %}
                            {% endif %}

                            {% if request.user.is_superuser %}
                                <li class="nav-item">
                                    <a href="{% url 'projects:charts' %}" class="nav-link
                                    {% if request.resolver_match.url_name == 'charts' %}
                                        active
                                    {% endif %}">
                                        <i class="fa-solid fa-chart-line text-primary" style="font-size: 1.2rem;"></i>
                                        <span class="ml-2">نمودارها</span>
                                    </a>
                                </li>
                            {% endif %}

                        </ul>

                    </li>
                {% endif %}

                {% if perms.projects_docs %}
                    <li class="nav-item has-treeview border-top border-light 
                        {% if request.resolver_match.app_name == 'projects_docs' %}menu-open{% endif %}">
                        <a href="#" class="nav-link
                        {% if request.resolver_match.app_name == 'projects_docs' %}active{% endif %}">
                            <p class="mr-2" style="font-size: 1.2rem;">
                                اسناد مرتبط با پروژه‌ها
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>

                        
                        <ul class="nav nav-treeview">
                            
                            {% if perms.projects_docs.view_contracts %}
                                {% main_menu request 'projects_docs' 'contracts' 'contract_create' 'contract_update' 'contracts_search' 'fa-handshake' 'قراردادها' %}
                            {% endif %}

                            {% if perms.projects_docs.view_proceedings %}
                                {% main_menu request 'projects_docs' 'proceedings' 'proceeding_create' 'proceeding_update' 'proceedings_search' 'fa-users-between-lines' 'صورت جلسه‌ها' %}
                            {% endif %}

                            {% if perms.projects_docs.view_agreements %}
                                {% main_menu request 'projects_docs' 'agreements' 'agreement_create' 'agreement_update' 'agreements_search' 'fa-people-arrows' 'توافق‌نامه‌ها' %}
                            {% endif %}

                            {% if perms.projects_docs.view_bankreceipts %}
                                {% main_menu request 'projects_docs' 'bank_receipts' 'bank_receipt_create' 'bank_receipt_update' 'bank_receipts_search' 'fa-file-invoice' 'رسیدهای بانکی' %}
                            {% endif %}

                            {% if perms.projects_docs.view_conditionstatements %}
                                {% main_menu request 'projects_docs' 'condition_statements' 'condition_statement_create' 'condition_statement_update' 'condition_statements_search' 'fa-file-signature' 'صورت وضعیت‌ها' %}
                            {% endif %}

                            {% if perms.projects_docs.view_registereddocs %}
                                {% main_menu request 'projects_docs' 'registered_docs' 'registered_doc_create' 'registered_doc_update' 'registered_docs_search' 'fa-file-contract' 'اسناد ثبتی' %}
                            {% endif %}

                            {% if perms.projects_docs.view_officialdocs %}
                                {% main_menu request 'projects_docs' 'official_docs' 'official_doc_create' 'official_doc_update' 'official_docs_search' 'fa-id-card' 'اسناد اداری' %}
                            {% endif %}
                        </ul>

                    </li>
                {% endif %}

                {% if perms.cheques_receive_pay %}
                    <li class="nav-item has-treeview border-top border-light
                        {% if request.resolver_match.app_name == 'cheques_receive_pay' %}menu-open{% endif %}">
                        <a href="#" class="nav-link
                        {% if request.resolver_match.app_name == 'cheques_receive_pay' %}active{% endif %}">
                            <p class="mr-2" style="font-size: 1.2rem;">
                                حسابداری
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview">

                            {% if perms.cheques_receive_pay.view_cheques %}
                                {% main_menu request 'cheques_receive_pay' 'cheques' 'cheque_create' 'cheque_update' 'cheques_search' 'fa-wallet' 'چک‌ها' %}
                            {% endif %}

                            {% if perms.cheques_receive_pay.view_receive_pay %}
                                {% main_menu request 'cheques_receive_pay' 'receive_pays' 'receive_pay_create' 'receive_pay_update' 'receive_pays_search' 'fa-money-bill-transfer' 'دریافت‌ها و پرداخت‌ها' %}
                            {% endif %}

                            {% if perms.cheques_receive_pay.view_fund %}
                                {% main_menu request 'cheques_receive_pay' 'funds' 'fund_create' 'fund_update' 'funds_search' 'fa-user-tag' 'تنخواه' %}
                            {% endif %}

                            {% if perms.cheques_receive_pay.view_cashbox %}
                                {% main_menu request 'cheques_receive_pay' 'cash_boxes' 'cash_box_create' 'cash_box_update' 'cash_boxes_search' 'fa-sack-dollar' 'صندوق' %}
                            {% endif %}

                        </ul>

                    </li>
                {% endif %}

                {% if perms.warehousing %}
                    <li class="nav-item has-treeview border-top border-light
                        {% if request.resolver_match.app_name == 'warehousing' %}menu-open{% endif %}">
                        <a href="#" class="nav-link
                        {% if request.resolver_match.app_name == 'warehousing' %}active{% endif %}">
                            <p class="mr-2" style="font-size: 1.2rem;">
                                انبارداری
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>


                        <ul class="nav nav-treeview">
                        
                        {% if perms.warehousing.view_mainwarehouseimport %}
                            {% main_menu request 'warehousing' 'warehouse_imports' 'warehouse_import_create' 'warehouse_import_update' 'warehouse_imports_search' 'fa-arrow-right-to-bracket' 'ورود به انبار اصلی' %}
                        {% endif %}
                        
                        {% if perms.warehousing.view_mainwarehouseexport %}
                            {% main_menu request 'warehousing' 'warehouse_exports' 'warehouse_export_create' 'warehouse_export_update' 'warehouse_exports_search' 'fa-arrow-right-from-bracket' 'خروج از انبار اصلی' %}
                        {% endif %}
                        
                        {% if perms.warehousing.view_projectwarehouse %}
                            {% main_menu request 'warehousing' 'project_warehouses' 'project_warehouse_create' 'project_warehouse_update' 'project_warehouses_search' 'fa-tent' 'انبار پروژه' %}
                        {% endif %}
                        
                        {% if perms.warehousing.view_usecertificate %}
                            {% main_menu request 'warehousing' 'use_certificates' 'use_certificate_create' 'use_certificate_update' 'use_certificates_search' 'fa-file-import' 'گواهی‌های مصرف کالا' %}
                        {% endif %}
                        
                        {% if perms.warehousing.view_stuff %}
                            {% main_menu request 'warehousing' 'stuffs' 'stuff_create' 'stuff_update' '' 'fa-boxes-stacked' 'کالاها' %}
                        {% endif %}
                        </ul>

                    </li>
                {% endif %}
                
                <p class="border-top border-light mb-0"></p>

                {% main_menu request 'account' 'reports' 'report_create' 'report_result' 'reports_search' 'fa-paste' 'گزارشات' %}


                <li class="nav-item border-top border-light ">
                    <a href="#" class="nav-link">
                        <i class="fa-solid fa-comments text-primary" style="font-size: 1.2rem;"></i>
                        <span class="ml-2">
                            پیام‌ها
                            <span class="badge badge-danger">جدید</span>
                        </span>
                    </a>
                </li>
                
                {% if request.user.is_superuser %}
                    <p class="border-top border-light mb-0"></p>

                    {% main_menu request 'account' 'users' 'user_create' 'user_update' 'users_search' 'fa-users' 'کاربران' %}
                    
                    <p class="border-top border-light mb-0"></p>

                    {% main_menu request 'account' 'groups' 'group_create' 'group_update' '' 'fa-elevator' 'گروه‌های دسترسی‌' %}


                    <li class="nav-item border-top border-light mb-3">
                        <a href="#" class="nav-link d-block">
                            <i class="fa-solid fa-database text-primary" style="font-size: 1.2rem;"></i>
                            <span class="ml-2">پشتیبان گیری پایگاه داده</span>
                        </a>
                    </li>
                {% endif %}
                
            </ul>
        </nav>

        <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
</aside>

