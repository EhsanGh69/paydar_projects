{% load crispy_forms_tags %}
{% load widget_tweaks %}

<div class="row">    
    <div class="col-12 col-xl-6 mb-3">
        {{ form.username|as_crispy_field }}
    </div>
  {% if request.resolver_match.url_name == 'user_create' %}
    <div class="col-12 col-xl-6 mb-3">
        {{ form.password|as_crispy_field }}
    </div>
    <div class="col-12 col-xl-6 mb-3">
        {{ form.confirm_password|as_crispy_field }}
    </div>
  {% endif %}
    <div class="col-12 col-xl-6 mb-3">
      <label>{{ form.access_groups.label }}*</label>
      <select name="access_groups" class="selectmultiple form-control 
      {% if form.access_groups.errors %}border border-danger{% endif %}" 
      id="id_access_groups" multiple>
        {% if request.resolver_match.url_name == 'user_create' %}
          {% for group in all_groups %}
              <option value="{{ group.name }}">
                  {{ group.name }}
              </option>
          {% endfor %}
        {% else %}
          {% for group in all_groups %}
              <option value="{{ group.name }}" {% if group in user_groups %}selected{% endif %}>
                  {{ group.name }}
              </option>
          {% endfor %}
        {% endif %}
      </select>
      {% if form.access_groups.errors %}
          {% for error in form.access_groups.errors %}
              <strong class="form-text text-danger" style="font-size:80%">{{ error }}</strong>
          {% endfor %}
      {% endif %}
    </div>
    <div class="col-12 col-xl-6 mb-3">
        {{ form.mobile_number|as_crispy_field }}
    </div>
    <div class="col-12 col-xl-6 mb-3">
        {{ form.first_name|as_crispy_field }}
    </div>
    <div class="col-12 col-xl-6 mb-3">
        {{ form.last_name|as_crispy_field }}
    </div>
  {% if request.resolver_match.url_name == 'user_update' %}
    <div class="col-12 col-xl-6 mb-3">
        {{ form.is_active|as_crispy_field }}
    </div>
  {% endif %}
</div>
<div class="row">
<div class="col-8 col-sm-6 col-xl-4 my-4">
    <button class="btn btn-success btn-block" type="submit" id="submit-btn">
        {% if request.resolver_match.url_name == 'user_create' %}
            <span>ثبت مشخصات کاربر</span>
        {% else %}
            <span>ویرایش کاربر</span>
        {% endif %}
    </button>
  </div>
</div>